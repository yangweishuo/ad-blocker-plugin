# 更新日志

## [1.0.1] - 2025-03-25

### 重要更新
- 升级到 Manifest V3，提高扩展兼容性和性能
- 重构广告拦截机制，使用 declarativeNetRequest API
- 优化状态管理和数据持久化

### 功能改进
- 增加对主流视频网站的广告拦截支持
  - 优酷视频前置广告
  - 爱奇艺视频广告
  - 腾讯视频广告
  - 哔哩哔哩视频广告
- 优化搜索引擎广告规则，保留热搜等正常功能
- 增强视频网站广告拦截能力
- 改进统计数据显示
- 添加设置状态持久化

### Bug修复
- 修复开关按钮无响应问题
  - 更新到 Manifest V3 规范
  - 替换 webRequest API 为 declarativeNetRequest
  - 修复权限配置问题
  - 完善消息传递机制
  - 添加错误处理和日志
- 修复统计数据问题
  - 添加数据持久化存储
  - 优化计数逻辑
  - 改进数据同步机制
- 修复状态同步问题
  - 实现多窗口状态同步
  - 添加 Storage API 支持
  - 优化状态管理逻辑
- 修复广告拦截规则问题
  - 更新视频网站广告选择器
  - 优化选择器匹配规则
  - 添加新的广告域名和关键词

### 技术改进
- 迁移到 Manifest V3
  - 替换 webRequest 为 declarativeNetRequest
  - 更新权限配置
  - 添加规则集配置
- 重构代码结构
  - 优化消息处理逻辑
  - 改进错误处理
  - 添加调试日志
- 改进性能
  - 优化规则匹配效率
  - 减少不必要的状态更新
  - 优化存储操作

### 已知问题
- 部分视频网站可能仍有漏网广告
- 某些特殊情况下统计数据可能不准确
- 在某些网站可能会误伤正常功能

### 下一步计划
- 添加白名单功能
- 优化广告规则匹配效率
- 添加自定义规则功能
- 改进统计数据准确性
- 添加更多视频网站支持
- 优化内存占用
- 添加规则自动更新机制
- 实现广告规则导入/导出功能
- 添加用户反馈机制

## [1.0.0] - 2024-03-xx

### 初始功能
- 实现基础广告拦截功能
- 添加常见广告网络域名拦截
- 添加搜索引擎广告精确匹配
- 添加视频网站广告拦截
- 添加实时统计功能
- 添加开关控制功能

### 优化改进
- 优化搜索引擎广告规则，保留热搜等正常功能
- 增强视频网站广告拦截能力
- 改进统计数据显示
- 添加设置状态持久化
- 优化UI交互体验

### Bug修复
- 修复按钮点击无响应问题
  - 添加必要的Chrome API权限
  - 修复消息传递机制
  - 添加错误处理
- 修复统计数据不准确问题
  - 添加统计数据持久化
  - 修复计数逻辑
- 修复设置状态不同步问题
  - 实现多窗口状态同步
  - 添加Storage API支持
- 修复部分广告未被拦截的问题
  - 增加更多视频广告选择器
  - 优化选择器匹配规则
  - 添加通用广告拦截规则

### 已知问题
- 部分视频网站可能仍有漏网广告
- 某些特殊情况下统计数据可能不准确
- 在某些网站可能会误伤正常功能

### 下一步计划
- 添加白名单功能
- 优化广告规则匹配效率
- 添加自定义规则功能
- 改进统计数据准确性
- 添加更多视频网站支持
- 优化内存占用 